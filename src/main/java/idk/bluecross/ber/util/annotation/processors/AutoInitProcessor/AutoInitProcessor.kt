package idk.bluecross.ber.util.annotation.processors.AutoInitProcessor

import idk.bluecross.ber.util.annotation.annotations.AutoInit
import kotlin.reflect.full.createInstance

@InitProcessor
object AutoInitProcessor : IProcessor {
    override fun process() {
        reflections
                .getTypesAnnotatedWith(AutoInit::class.java)
                .map(Class<*>::kotlin)
                .forEach {
                    if (!it.isAbstract) {
                        it.objectInstance ?:/* if not kotlin `object` then init with empty constructor*/
                        it.createInstance()
                    }
                }
    }
}