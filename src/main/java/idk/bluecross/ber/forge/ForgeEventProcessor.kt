package idk.bluecross.ber.forge

import idk.bluecross.ber.impl.event.ConnectionEvent
import idk.bluecross.ber.util.annotation.annotations.AutoInit
import idk.bluecross.ber.util.interfaces.IEventBusRegistrar
import net.minecraftforge.common.MinecraftForge
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent
import net.minecraftforge.fml.common.network.FMLNetworkEvent

@AutoInit
object ForgeEventProcessor : IEventBusRegistrar {
    init {
        register(this)
        println("ForgeEventProcessor")
    }

    @SubscribeEvent
    fun onClientConnect(e: FMLNetworkEvent.ClientConnectedToServerEvent) {
        MinecraftForge.EVENT_BUS.post(ConnectionEvent.Connect())
    }

    @SubscribeEvent
    fun onClientDisconnect(event: FMLNetworkEvent.ClientDisconnectionFromServerEvent) {
        println("disconnect")
        MinecraftForge.EVENT_BUS.post(ConnectionEvent.Disconnect())
    }
}